import re

def clean_text(text: str) -> str:
    """
    æ•æ„Ÿä¿¡æ¯æ¸…æ´—å‡½æ•°ï¼šè‡ªåŠ¨è¯†åˆ«æ‰‹æœºå·ã€é‚®ç®±å’Œèº«ä»½è¯å¹¶æ‰“ç 
    """
    # 1. å®šä¹‰"æ‰‹æœºå·"çš„è§„å¾‹ (æ­£åˆ™ Pattern)
    # è§£é‡Š: 1å¼€å¤´ï¼Œç¬¬äºŒä½æ˜¯3-9ï¼Œåé¢è·Ÿç€9ä¸ªæ•°å­—
    phone_pattern = r"1[3-9]\d{9}"
    
    # 2. å®šä¹‰"é‚®ç®±"çš„è§„å¾‹
    # è§£é‡Š: å­—æ¯æ•°å­—@å­—æ¯æ•°å­—.com
    email_pattern = r"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"
    
    # 3. å®šä¹‰"èº«ä»½è¯"çš„è§„å¾‹
    # è§£é‡Š: æ”¯æŒ15ä½ï¼ˆæ—§ç‰ˆï¼‰å’Œ18ä½ï¼ˆæ–°ç‰ˆï¼‰èº«ä»½è¯
    # 18ä½ï¼š17ä¸ªæ•°å­— + æœ€åä¸€ä½æ•°å­—æˆ–Xï¼ˆä¼˜å…ˆåŒ¹é…ï¼Œé¿å…è¢«15ä½æ¨¡å¼æˆªæ–­ï¼‰
    # 15ä½ï¼š15ä¸ªè¿ç»­æ•°å­—
    id_card_pattern = r"\d{17}[\dXx]|\d{15}"
    
    # 4. å¼€å§‹æ›¿æ¢ (æ ¸å¿ƒé­”æ³• re.sub)
    # è¯­æ³•: re.sub(æ­£åˆ™, æ›¿æ¢æˆä»€ä¹ˆ, åŸæ–‡)
    # æ³¨æ„ï¼šå…ˆåŒ¹é…èº«ä»½è¯ï¼ˆæ›´é•¿æ¨¡å¼ï¼‰ï¼Œé¿å…è¢«æ‰‹æœºå·æ­£åˆ™è¯¯åŒ¹é…
    # é“¾å¼å¤„ç†ï¼šæ¯æ¬¡éƒ½åœ¨å‰ä¸€æ­¥å¤„ç†ç»“æœçš„åŸºç¡€ä¸Šç»§ç»­å¤„ç†
    
    # å…ˆæ´—æ‰èº«ä»½è¯ï¼ˆä¼˜å…ˆåŒ¹é…ï¼Œé¿å…è¢«æ‰‹æœºå·è¯¯åŒ¹é…ï¼‰
    text_safe = re.sub(id_card_pattern, "[èº«ä»½è¯å·²å±è”½]", text)
    
    # å†æ´—æ‰æ‰‹æœºå·
    text_safe = re.sub(phone_pattern, "[æ‰‹æœºå·å·²å±è”½]", text_safe)
    
    # æœ€åæ´—æ‰é‚®ç®±
    text_safe = re.sub(email_pattern, "[é‚®ç®±å·²å±è”½]", text_safe)
    
    return text_safe

# --- æµ‹è¯•ç¯èŠ‚ ---
if __name__ == "__main__":
    # æ¨¡æ‹Ÿç”¨æˆ·å‘ç»™ AI çš„å±é™©è¾“å…¥
    user_input = "æˆ‘çš„ç”µè¯æ˜¯ 13812345678ï¼Œé‚®ç®±æ˜¯ student@monash.eduï¼Œèº«ä»½è¯æ˜¯ 110101199001011234ï¼Œè¯·è”ç³»æˆ‘ï¼"
    
    print("ğŸ”´ åŸå§‹è¾“å…¥:", user_input)
    
    # è°ƒç”¨å®‰å…¨å±‚
    safe_input = clean_text(user_input)
    
    print("ğŸŸ¢ æ¸…æ´—ç»“æœ:", safe_input)